(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a10a9750"],{"17a8":function(t,e,n){},"4e94":function(t,e,n){"use strict";var s=n("17a8"),r=n.n(s);r.a},ee79:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"chat-container"}},[n("audio",{attrs:{src:"/sounds/tink.wav"}}),n("el-container",{staticStyle:{height:"100vh"}},[n("el-aside",{staticStyle:{"background-color":"#073042"},attrs:{width:"400px"}},[n("div",[n("p",{attrs:{id:"network-status"}},[t._v("Currently Online")]),n("div",{attrs:{id:"chat-users-container"}},[n("ul",{attrs:{id:"chat-users"}},t._l(t.users,function(e){return n("li",[t._v(t._s(e))])}),0)])])]),n("el-container",[n("el-main",[n("div",{attrs:{id:"chat-log"}}),n("el-form",{attrs:{id:"chat-form"},nativeOn:{submit:function(e){return e.preventDefault(),t.sendMesg(e)}}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16}},[n("el-form-item",[n("el-input",{attrs:{type:"textarea",placeholder:"Enter your message here",autosize:!0},model:{value:t.mesg,callback:function(e){t.mesg=e},expression:"mesg"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",[n("el-button",{attrs:{type:"primary",disabled:t.btnStatus},on:{click:function(e){return e.preventDefault(),t.sendMesg(e)}}},[t._v("SEND")])],1)],1)],1)],1)],1)],1)],1)],1)},r=[],a={data:function(){return{ws:null,chatname:"",users:[],mesg:""}},methods:{getUsers:function(){var t=this;this.$http.get("http://".concat(document.location.host,"/chat/api/users")).then(function(e){return t.users=e.body}).catch(function(t){return console.log(t)})},appendLog:function(t,e){this.getUsers();var n=document.getElementById("chat-log"),s=document.querySelector("audio"),r=n.scrollTop>n.scrollHeight-n.clientHeight-1,a=document.createElement("div"),i=document.createElement("div");e&&(i.className="sender",a.className="mesg",i.innerHTML=t,a.innerHTML=e,n.appendChild(i),n.appendChild(a),s&&t!==this.chatname&&(s.currentTime=0,s.play()),r&&(n.scrollTop=n.scrollHeight-n.clientHeight))},sendMesg:function(){this.ws.send(JSON.stringify({Sender:this.chatname,Text:this.mesg})),this.mesg=""}},watch:{$route:{handler:function(t){var e=t.query;e&&(this.chatname=e.u)},immediate:!0}},created:function(){var t=this,e="ws://".concat(document.location.host,"/ws?u=").concat(this.chatname);null===this.ws&&(this.ws=new WebSocket(e)),this.ws.onopen=function(e){return t.getUsers()},this.ws.onmessage=function(e){var n=JSON.parse(e.data),s=n.sender,r=n.text;t.appendLog(s,r)},this.ws.onerror=function(t){return console.error(t)},this.ws.onclose=function(){return t.appendLog("<b>Connection closed.</b>")}},computed:{btnStatus:function(){return""===this.mesg}}},i=a,o=(n("4e94"),n("2877")),c=Object(o["a"])(i,s,r,!1,null,null,null);e["default"]=c.exports}}]);